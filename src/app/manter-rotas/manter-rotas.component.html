<section>
    <main>
        <app-header></app-header>
    </main>
</section>

<div class="modal fade" id="mensagem" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Mensagem...</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>{{notificacao}}</p>
            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-12 text-center mt-5">
            <h2>Cadastro de Rotas</h2>
        </div>
    </div>

    <div class="row justify-content-center mt-5 mb-5">
        <div class="col-sm-12 col-md-10 col-lg-12">
            <form id="form" #frm="ngForm">
                <div class="form-row" id="consulta">
                    <div class="form-group col-lg-3">
                        <input [(ngModel)]="consultaCodVer" id="con_rota" name="con_rota" type="search" autocomplete="off" placeholder="código verificador da rota" minlength="8" maxlength="8" class="form-control input-md">
                    </div>
                    <div >
                        <button type="button" (click)="consultar(consultaCodVer)" class="btn btn-light">
                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-search" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M10.442 10.442a1 1 0 0 1 1.415 0l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1 1 0 0 1 0-1.415z"/>
                                <path fill-rule="evenodd" d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"/>
                            </svg>
                        </button>
                    </div>
                    <div class="form-group col-lg-8">
                        <button type="submit" class="btn btn-success medio" [disabled]="frm.invalid" (click)="salvar()" data-toggle="modal" data-target="#mensagem">Salvar</button>
                        <button type="button" class="btn btn-danger medio" [disabled]="frm.invalid" (click)="excluir(rota.id)" data-toggle="modal" data-target="#mensagem">Remover</button>
                        <button type="button" class="btn btn-secondary medio" (click)="limpar()">Limpar</button>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-lg-3">
                        <label for="data">Data</label>
                        <input [(ngModel)]="rota.data" id="data" name="data" placeholder="DD/MM/AAAA" class="form-control input-md" type="date" minlength="10" maxlength="10" required />
                    </div>
                    <div class="form-group col-lg-3">
                        <label for="horario">Horário</label>
                        <input [(ngModel)]="rota.horario" id="horario" name="horario" placeholder="00:00:00" class="form-control input-md" autocomplete="off" type="time" step="0" required />
                    </div>
                    <div class="form-group col-lg-3">
                        <label for="placa">Veiculo(Placa)</label>
                        <input [(ngModel)]="rota.veiculo.placa" (blur)="consultarVeiculo($event.target.value)" pattern="^[A-Z]{3}-\d{4}$" id="placa" autocomplete="off" name="placa" type="text" placeholder="XXX-0000" minlength="8" maxlength="8" class="form-control input-md" required
                        />
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-lg-9">
                        <label for="pontoEncontro">Saída</label>
                        <input [(ngModel)]="rota.inicio" id="pontoEncontro" name="pontoEncontro" type="text" minlength="10" maxlength="100" autocomplete="off" placeholder="endereço, ponto de referencia e cidade da sua saída" class="form-control input-md" required />
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-lg-9">
                        <label for="localDestino">Destino</label>
                        <input [(ngModel)]="rota.fim" id="localDestino" name="localDestino" type="text" minlength="10" maxlength="100" autocomplete="off" placeholder="endereço, ponto de referencia e cidade do seu destino" class="form-control input-md" required />
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-lg-2" id="posi-veri">
                        <label for="verificador">Verificador</label>
                        <input [(ngModel)]="rota.verificador" readonly=“true” autocomplete="off" id="verificador" name="verificador" type="text" class="form-control input-md" required />
                    </div>
                    <div class="form-group col-lg-2">
                        <label for="status">Status</label>
                        <select [(ngModel)]="rota.status" id="status" name="status" class="form-control" required>
                            <option value="Disponivel">Disponivel</option>
                            <option value="Indisponivel">Indisponivel</option>
                        </select>
                    </div>
                    <div class="form-group col-lg-4">
                        <label for="contribuicao">Contribuição</label>
                        <select [(ngModel)]="rota.contribuicao.id" id="contribuicao" name="contribuicao" class="form-control" required>
                            <option *ngFor="let contribuicao of contribuicoes" value="{{ contribuicao.id }}">{{ contribuicao.tipo }}
                                -
                                {{ contribuicao.valor }}</option>
                        </select>
                    </div>
                    <div class="form-group col-lg-1">
                        <button type="button" class="btn btn-info" (click)="pegarDados()" routerLink="/manter-contribuições" id="add-cont">
                            <svg width="32px" height="22px" viewBox="0 0 16 16" class="bi bi-plus-circle" fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd"
                                    d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                                <path fill-rule="evenodd"
                                    d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z" />
                            </svg>
                        </button>
                    </div>
                </div>
                
            </form>
        </div>
    </div>
</div>